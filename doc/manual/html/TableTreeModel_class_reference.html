<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <meta name="Generator" content="MKDOC " />
 <title>QtLua library manual </title>
 <link rel="stylesheet" href="mkdoc.css" />
 <style type="text/css">

  .sec_hidden { display: none; }
  .sec_shown {}
 </style>
</head><body>
<div class="page"><div class="head"><img class="headlogo" src="logo-small.png" alt="logo" /><div class="headlinks"><a href="Table_of_contents.html">Table of contents</a>
 &nbsp; <a href="API_documentation.html">API documentation</a>
</div><div class="navlinks"><a href="index.html" accesskey="t">Top</a> &nbsp; <a href="TableGridModel_class_reference.html"  accesskey="p" id="nav_prev">Previous </a> &nbsp; <a href="API_documentation.html"  accesskey="u" id="nav_up"> Up </a> &nbsp; <a href="UserData_class_reference.html"  accesskey="n" id="nav_next"> Next</a></div>
</div><div class="content"><div style="clear: both; height:20px;"></div>
<h1>TableTreeModel class reference<br /><span class="subtitle">
[Model/View module]</span>
</h1><div class="sec_content1">
<div style="clear: both; height:20px;"></div>
</div><h2>Declaration<a href="#_Declaration22" id="_Declaration22" class="hover_link">&nbsp;&nbsp;</a></h2><div class="sec_content2">
<div class="codebox"><code><span class="codedir">#include</span> &lt;QtLua/TableTreeModel&gt;<br /><br /><span class="codekw">namespace</span> QtLua {<br />  <span class="codekw">class</span> TableTreeModel;<br />};<br /></code></div><p> This class is a member of the <a href="QtLua_namespace_reference.html">QtLua</a> namespace.</p>
</div><h2>Description<a href="#_Description23" id="_Description23" class="hover_link">&nbsp;&nbsp;</a></h2><div class="sec_content2">
<p>This class can be used to expose lua tables content to Qt view widgets in a flat or hierarchical manner.</p>
<p>Lua tables and <a href="UserData_class_reference.html">UserData</a> objects with valid table operations are handled.</p>
<p>Lua tables can be edited from Qt views using this model. The TableTreeModel::<a href="TableTreeModel_class_reference.html#_323">Attribute</a> flags can be used to finely control which editing actions are allowed. User input may be evaluated as a lua expression when editing a table entry.</p>
<p>Lua tables change may <strong>not</strong> update the model on the fly and the TableTreeModel::<a href="TableTreeModel_class_reference.html#_338">update</a> function must be called to refresh views on heavy modifications. This is partially due to lack of lua mechanism to implement efficient table change event.</p>
<p>Usage example:</p>
<div class="codebox"><code><span class="codecmt">// code from <a href="http://svn.savannah.gnu.org/viewvc/trunk/libqtlua/examples/cpp/mvc/tabletreeview.cc?root=libqtlua&revision=0&view=annotate#l30">examples/cpp/mvc/tabletreeview.cc:30</a></span><br /><br />  state = <span class="codekw">new</span> <a class="coderef" href="State_class_reference.html">QtLua::State</a>();<br />  state-&gt;openlib(<a class="coderef" href="QtLua_namespace_reference.html#_584">QtLua::AllLibs</a>);<br /><br />  <span class="codecmt">// Create a new model and expose lua global table</span><br />  model = <span class="codekw">new</span> <a class="coderef" href="TableTreeModel_class_reference.html">QtLua::TableTreeModel</a>((*state)[<span class="codestr">&quot;_G&quot;</span>], <a class="coderef" href="TableTreeModel_class_reference.html#_323">QtLua::TableTreeModel::Recursive</a>);<br /><br />  <span class="codecmt">// Create Qt view widget</span><br />  treeview = <span class="codekw">new</span> <a class="coderef" href="http://doc.trolltech.com/4.5/qtreeview.html">QTreeView</a>(0);<br />  treeview-&gt;setModel(model);<br /><br />  setCentralWidget(treeview);<br /></code></div><div class="img_frame"><img src="qtlua_tabletreemodel.png" /></div><p>See also <a href="TableDialog_class_reference.html">TableDialog</a> class.</p>
</div><h2>Inheritance<a href="#_Inheritance22" id="_Inheritance22" class="hover_link">&nbsp;&nbsp;</a></h2><div class="sec_content2">
<ul><li><span class="ext_link"><a href="http://doc.trolltech.com/4.5/qabstractitemmodel.html">QAbstractItemModel</a></span></li>
</ul>
</div><h2>Members<a href="#_Members22" id="_Members22" class="hover_link">&nbsp;&nbsp;</a></h2><div class="sec_content2">
</div><h3>Types<a href="#_Types13" id="_Types13" class="hover_link">&nbsp;&nbsp;</a></h3><div class="sec_content3">
<ul><li><span class="listitem"><span class="member_prefix">enum </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_323">Attribute</a></span></span></span></li>
<li><span class="listitem"><span class="member_prefix">typedef <em> [...] </em> </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_324">Attributes</a></span></span></span></li>
</ul>
</div><h3>Functions<a href="#_Functions21" id="_Functions21" class="hover_link">&nbsp;&nbsp;</a></h3><div class="sec_content3">
<ul><li><span class="listitem"><span class="member_prefix"></span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_321">TableTreeModel</a></span>(<span class="member_params"><span class="member_param">const Value &amp;root, </span><span class="member_param">TableTreeModel::Attributes attr, </span><span class="member_param">QObject *parent = <em>[...]</em></span>)</span></span></span></li>
<li><span class="listitem"><span class="member_prefix"></span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_322">~TableTreeModel</a></span>(<span class="member_params">)</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">QModelIndex </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_325">buddy</a></span>(<span class="member_params"><span class="member_param">const QModelIndex &amp;index</span>) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">int </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_326">columnCount</a></span>(<span class="member_params"><span class="member_param">const QModelIndex &amp;parent</span>) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">QVariant </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_327">data</a></span>(<span class="member_params"><span class="member_param">const QModelIndex &amp;index, </span><span class="member_param">int role</span>) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">Qt::ItemFlags </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_328">flags</a></span>(<span class="member_params"><span class="member_param">const QModelIndex &amp;index</span>) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">TableTreeModel::Attributes </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_329">get_attr</a></span>(<span class="member_params"><span class="member_param">const QModelIndex &amp;index</span>) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">Value </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_330">get_value</a></span>(<span class="member_params"><span class="member_param">const QModelIndex &amp;index</span>) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">bool </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_331">hasChildren</a></span>(<span class="member_params"><span class="member_param">const QModelIndex &amp;parent</span>) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">QVariant </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_332">headerData</a></span>(<span class="member_params"><span class="member_param">int section, </span><span class="member_param">Qt::Orientation orientation, </span><span class="member_param">int role</span>) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">bool </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_333">insertRows</a></span>(<span class="member_params"><span class="member_param">int row, </span><span class="member_param">int count, </span><span class="member_param">const QModelIndex &amp;parent</span>)</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">QModelIndex </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_334">parent</a></span>(<span class="member_params"><span class="member_param">const QModelIndex &amp;index</span>) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">bool </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_335">removeRows</a></span>(<span class="member_params"><span class="member_param">int row, </span><span class="member_param">int count, </span><span class="member_param">const QModelIndex &amp;parent</span>)</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">int </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_336">rowCount</a></span>(<span class="member_params"><span class="member_param">const QModelIndex &amp;parent</span>) const</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">bool </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_337">setData</a></span>(<span class="member_params"><span class="member_param">const QModelIndex &amp;index, </span><span class="member_param">const QVariant &amp;value, </span><span class="member_param">int role</span>)</span></span></span></li>
<li><span class="listitem"><span class="member_prefix">void </span><span class="member_signature"><span class="member_name"><a href="TableTreeModel_class_reference.html#_338">update</a></span>(<span class="member_params">)</span></span></span></li>
</ul>
</div><h2>Members detail<a href="#_Members_detail22" id="_Members_detail22" class="hover_link">&nbsp;&nbsp;</a></h2><div class="sec_content2">
</div><div class="divmember public_member"><h3><span class="member_prefix"></span><span class="member_signature"><span class="member_name">TableTreeModel</span>(<span class="member_params"><span class="member_param">const <a href="Value_class_reference.html">Value</a> &amp;root, </span><span class="member_param">TableTreeModel::<a href="TableTreeModel_class_reference.html#_324">Attributes</a> attr, </span><span class="member_param"><span class="ext_link"><a href="http://doc.trolltech.com/4.5/qobject.html">QObject</a></span> *parent = 0</span>)</span></span><a href="#_321" id="_321" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Create a new lua table model.</p>
</div><div class="divmember public_member"><h3><span class="member_prefix"></span><span class="member_signature"><span class="member_name">~TableTreeModel</span>(<span class="member_params">)</span></span><a href="#_322" id="_322" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p><span class="nodoc">No documentation available</span></p>
</div><div class="divmember public_member"><h3><span class="member_prefix">enum </span><span class="member_signature"><span class="member_name">Attribute</span></span><a href="#_323" id="_323" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Specifies <a href="TableTreeModel_class_reference.html">TableTreeModel</a> behavior for a given lua table</p>
<div class="table_frame"><table class="table"><tr class="tr_head"><th style="width:30%;">Identifier</th><th style="width:70%;">Description</th></tr>
<tr class="tr1"><td>Recursive</td><td>Expose nested tables too.<br />
</td></tr>
<tr class="tr0"><td>UserDataIter</td><td>Iterate over UserData objects too.<br />
</td></tr>
<tr class="tr1"><td>HideType</td><td>Do not show entry type in an additionnal column.<br />
</td></tr>
<tr class="tr0"><td>UnquoteKeys</td><td>Strip double quotes from string keys<br />
</td></tr>
<tr class="tr1"><td>UnquoteValues</td><td>Strip double quotes from string values<br />
</td></tr>
<tr class="tr0"><td>Editable</td><td>Allow editing exposed lua tables.<br />
</td></tr>
<tr class="tr1"><td>EditFixedType</td><td>Prevent value type change when editing.<br />
</td></tr>
<tr class="tr0"><td>EditLuaEval</td><td>Evaluate user input as a lua expression.<br />
</td></tr>
<tr class="tr1"><td>EditInsert</td><td>Allow insertion of new entries.<br />
</td></tr>
<tr class="tr0"><td>EditRemove</td><td>Allow deletion of existing entries.<br />
</td></tr>
<tr class="tr1"><td>EditKey</td><td>Allow entry key update.<br />
</td></tr>
<tr class="tr0 tr_last"><td>EditAll</td><td>Editable, EditInsert, EditRemove and EditKey allowed<br />
</td></tr></table></div>
<p>See also TableTreeModel::<a href="TableTreeModel_class_reference.html#_324">Attributes</a> typedef.</p>
</div><div class="divmember public_member"><h3><span class="member_prefix">typedef TableTreeModel::<a href="TableTreeModel_class_reference.html#_323">Attribute</a> </span><span class="member_signature"><span class="member_name">Attributes</span></span><a href="#_324" id="_324" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p><span class="nodoc">No documentation available</span></p>
</div><div class="divmember public_member"><h3><span class="member_prefix"><span class="ext_link"><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a></span> </span><span class="member_signature"><span class="member_name">buddy</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a></span> &amp;index</span>) const</span></span><a href="#_325" id="_325" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p><span class="nodoc">No documentation available</span></p>
</div><div class="divmember public_member"><h3><span class="member_prefix">int </span><span class="member_signature"><span class="member_name">columnCount</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a></span> &amp;parent</span>) const</span></span><a href="#_326" id="_326" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p><span class="nodoc">No documentation available</span></p>
</div><div class="divmember public_member"><h3><span class="member_prefix"><span class="ext_link"><a href="http://doc.trolltech.com/4.5/qvariant.html">QVariant</a></span> </span><span class="member_signature"><span class="member_name">data</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a></span> &amp;index, </span><span class="member_param">int role</span>) const</span></span><a href="#_327" id="_327" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p><span class="nodoc">No documentation available</span></p>
</div><div class="divmember public_member"><h3><span class="member_prefix">Qt::<span class="ext_link"><a href="http://doc.trolltech.com/4.5/qt.html#ItemFlag-enum">ItemFlags</a></span> </span><span class="member_signature"><span class="member_name">flags</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a></span> &amp;index</span>) const</span></span><a href="#_328" id="_328" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p><span class="nodoc">No documentation available</span></p>
</div><div class="divmember public_member"><h3><span class="member_prefix">TableTreeModel::<a href="TableTreeModel_class_reference.html#_324">Attributes</a> </span><span class="member_signature"><span class="member_name">get_attr</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a></span> &amp;index</span>) const</span></span><a href="#_329" id="_329" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Get supported operations for entry at given <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a></span></p>
</div><div class="divmember public_member"><h3><span class="member_prefix"><a href="Value_class_reference.html">Value</a> </span><span class="member_signature"><span class="member_name">get_value</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a></span> &amp;index</span>) const</span></span><a href="#_330" id="_330" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Get lua value at given model index</p>
</div><div class="divmember public_member"><h3><span class="member_prefix">bool </span><span class="member_signature"><span class="member_name">hasChildren</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a></span> &amp;parent</span>) const</span></span><a href="#_331" id="_331" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p><span class="nodoc">No documentation available</span></p>
</div><div class="divmember public_member"><h3><span class="member_prefix"><span class="ext_link"><a href="http://doc.trolltech.com/4.5/qvariant.html">QVariant</a></span> </span><span class="member_signature"><span class="member_name">headerData</span>(<span class="member_params"><span class="member_param">int section, </span><span class="member_param">Qt::<span class="ext_link"><a href="http://doc.trolltech.com/4.5/qt.html#Orientation-enum">Orientation</a></span> orientation, </span><span class="member_param">int role</span>) const</span></span><a href="#_332" id="_332" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p><span class="nodoc">No documentation available</span></p>
</div><div class="divmember public_member"><h3><span class="member_prefix">bool </span><span class="member_signature"><span class="member_name">insertRows</span>(<span class="member_params"><span class="member_param">int row, </span><span class="member_param">int count, </span><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a></span> &amp;parent</span>)</span></span><a href="#_333" id="_333" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p><span class="nodoc">No documentation available</span></p>
</div><div class="divmember public_member"><h3><span class="member_prefix"><span class="ext_link"><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a></span> </span><span class="member_signature"><span class="member_name">parent</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a></span> &amp;index</span>) const</span></span><a href="#_334" id="_334" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p><span class="nodoc">No documentation available</span></p>
</div><div class="divmember public_member"><h3><span class="member_prefix">bool </span><span class="member_signature"><span class="member_name">removeRows</span>(<span class="member_params"><span class="member_param">int row, </span><span class="member_param">int count, </span><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a></span> &amp;parent</span>)</span></span><a href="#_335" id="_335" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p><span class="nodoc">No documentation available</span></p>
</div><div class="divmember public_member"><h3><span class="member_prefix">int </span><span class="member_signature"><span class="member_name">rowCount</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a></span> &amp;parent</span>) const</span></span><a href="#_336" id="_336" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p><span class="nodoc">No documentation available</span></p>
</div><div class="divmember public_member"><h3><span class="member_prefix">bool </span><span class="member_signature"><span class="member_name">setData</span>(<span class="member_params"><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a></span> &amp;index, </span><span class="member_param">const <span class="ext_link"><a href="http://doc.trolltech.com/4.5/qvariant.html">QVariant</a></span> &amp;value, </span><span class="member_param">int role</span>)</span></span><a href="#_337" id="_337" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p><span class="nodoc">No documentation available</span></p>
</div><div class="divmember public_member"><h3><span class="member_prefix">void </span><span class="member_signature"><span class="member_name">update</span>(<span class="member_params">)</span></span><a href="#_338" id="_338" class="hover_link">&nbsp;&nbsp;</a></h3></div><div class="sec_content3">
<p>Clear cached table content and reset model.</p>
</div></div></div><div class="foot"><p class="generated"><a style="float: right;" href="http://validator.w3.org/check?uri=referer">Valid XHTML 1.0 Strict</a>Generated by diaxen on Mon Aug 15 03:23:06 2011 using <a href="http://www.nongnu.org/mkdoc/">MkDoc</a></p></div></body></html>